\begin{algorithm}[t]\fontfamily{lmss}
\caption{Privacy Preserving ID3 Algorithm \fixme{Many more fixes}}\label{a:id3-pp}
\begin{algorithmic}[1]
\renewcommand{\algorithmicrequire}{\textbf{Private Vars:}}
\Require ${\color{darkred}{examples}}, {\color{darkred}{eq}}$
\renewcommand{\algorithmicrequire}{\textbf{Global Vars:}}
\Require $classAttribute, possibleValues$

\Procedure{ID3}{${\color{darkred}{examples}}, attributes$}
    \State ${\color{darkred}{allSame}} \gets \textsc{AllExamplesSame}({\color{darkred}{examples}})$

    \If {{\color{darkblue}{\textsc{Declassify}}}$({\color{darkred}{allSame}})$}
        \State \textbf{return} ${\color{darkred}{examples}}[0][classAttribute]$
    \ElsIf {$attributes) = \{\}$}
        \State \textbf{return} $\textsc{MostCommonLabel}({\color{darkred}{examples}})$
    \EndIf

    \State ${\color{darkred}{A}} \gets$ The Attribute that best classifies examples
    \State Decision Tree attribute for ${\color{darkred}{root}} \gets {\color{darkred}{A}}$

    \State ${\color{darkred}{branches}} \gets {\color{darkred}{\{\}}}$

    \For{each possible value $v_i$ of ${\color{darkred}{A}}$}
        \State Add a new tree branch below ${\color{darkred}{root}}$, corresponding to the test ${\color{darkred}{A}} \gets v_i$
        \State Let ${\color{darkred}{examples}}[v_i]$ be the subset of examples that have the value $v_i$ for ${\color{darkred}{A}}$

        \If {{\color{darkblue}{\textsc{Declassify}}}$(\textsc{Length}({\color{darkred}{examples}}[v_i]) \heq \enc{0})$}
            \State ${\color{darkred}{branch}} \gets \textsc{MostCommonLabel}({\color{darkred}{examples}}))$ add a leaf
        \Else
            \State ${\color{darkred}{branch}} \gets \textsc{ID3}({\color{darkred}{examples}}[v_i],$ $attributes - \{A\})$ add the subtree
        \EndIf
        \State ${\color{darkred}{branches}} \gets {\color{darkred}{branches}} \cup {\color{darkred}{branch}}$
    \EndFor
    \State \textbf{return} ${\color{darkred}{branches}}$

\EndProcedure

\end{algorithmic}
\end{algorithm}

