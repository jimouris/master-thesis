\begin{algorithm}[H]\fontfamily{lmss}
\caption{Privacy Preserving 1D Histogram for Categorical Values}\label{a:1d-histogram-categorical}
\begin{algorithmic}[1]
\renewcommand{\algorithmicrequire}{\textbf{Private Vars:}}
\Require ${\color{darkred}{array}}, {\color{darkred}{histogram}}, {\color{darkred}{eq}}$

\Procedure{1DimHistogramCategorical}{${\color{darkred}{array}}[N], P$}
    \For{$i \in \{0, \dots, P-1\}$}\Comment{\small{$P$ is the number of the different (possible) values in $array$}}
        \State ${\color{darkred}{eq}} \gets ({\color{darkred}{array}} \heq i)$\Comment{\small{\texttt{SIMD}; array eq contains $\enc{1}$ where $array[j] \heq i$, \par\hfill$\enc{0}$ otherwise, $j \in \{0, \dots, P-1\}$}}

        \State ${\color{darkred}{histogram}}[i] \gets
        \textsc{Sum}({\color{darkred}{eq}})$\Comment{\small{\texttt{SIMD} operation to sum eq array}}
    \EndFor
    \State \textbf{return} {${\color{darkred}{histogram}}$}
\EndProcedure

\begin{spacing}{0.5}
\end{spacing}

\Require ${\color{darkred}{array}}, {\color{darkred}{sum}}$
\Procedure{Sum}{${\color{darkred}{array}}[N]$}\Comment{\small{Compute and return the sum of an array}}
    \State ${\color{darkred}{sum}} \gets \enc{0}$
    \For{$i \in \{0, \dots, N-1\}$}
        \State ${\color{darkred}{sum}} \gets {\color{darkred}{sum}} \hplus{\color{darkred}{array}}[i]$
    \EndFor
    \State \textbf{return} {${\color{darkred}{sum}}$}
\EndProcedure

\end{algorithmic}
\end{algorithm}

